{"version":3,"sources":["script-drag-drop-exerc.js"],"names":["jQuery","$","fn","drag_drop_exerc","options","BASE","settings","itemClass","featuredItemClass","confirmarClass","call","undefined","limiteAlvo","relacionar","$container","$activeItem","$activeItemOld","THIS","$alvoItem","$activeItemEncap","indiceArraste","indiceAlvo","individual","resolucaoMin","find","SETTINGS","onAlvoClick","_this","attr","parent","children","length","_obj","clone","_parent","addClass","append","removeClass","_parentOld","onDragStart","originalEvent","dataTransfer","effectAllowed","setData","statusConfirmar","onDragOver","event","action","parentOld","parentInit","response","remove","drag","removeAttr","onDrop","dropThis","this","innerHTML","status","dragThis","drop","dropObj","oldParent","dropEffect","stopPropagation","_alvoMudado","alv","_arraste","_statusConfere","model","_alvoArray","item","split","eq","i","alvos","alvosAll","each","indice","setAttribute","on","onArrasteClick","old","console","log"],"mappings":"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","file":"script-drag-drop-exerc.js","sourcesContent":["(function () {\r\n  $.fn.drag_drop_exerc = function (options) {\r\n    var BASE = {};\r\n    var settings = $.extend(\r\n      {\r\n        itemClass: \"item\",\r\n        featuredItemClass: \"featuredItens\",\r\n        confirmarClass: \"confirmar\",\r\n        call: undefined,\r\n        limiteAlvo: 1,\r\n        relacionar: false,\r\n      },\r\n      options\r\n    );\r\n\r\n    BASE.SETTINGS = settings;\r\n    BASE.THIS = this;\r\n    BASE.$container = BASE.THIS;\r\n    BASE.$activeItem = null;\r\n    BASE.$activeItemOld = null;\r\n    BASE.$alvoItem = null;\r\n    BASE.$activeItemEncap = null;\r\n    BASE.indiceArraste = 0;\r\n    BASE.indiceAlvo = 0;\r\n    BASE.individual = true;\r\n\r\n    var resolucaoMin = BASE.SETTINGS.relacionar ? true : false;\r\n\r\n    //$(BASE.$container).find('.' + BASE.SETTINGS.confirmarClass).removeClass('hide');\r\n    $(BASE.$container)\r\n      .find(\".\" + BASE.SETTINGS.itemClass)\r\n      .each(function (indice, item) {\r\n        if ($(item).attr(\"arraste\")) {\r\n          BASE.indiceArraste++;\r\n          $(item).addClass(\"arraste\");\r\n          $(item).addClass(\"arraste\" + $(item).attr(\"arraste\"));\r\n          $(item).attr(\"indiceArraste\", $(item).attr(\"arraste\"));\r\n          $(item)[0].parentInit = $(item).parent();\r\n\r\n          if (!resolucaoMin) {\r\n            // Exc de Arraste\r\n            item.setAttribute(\"draggable\", \"true\");\r\n            $(item).on(\"dragstart\", onDragStart);\r\n            $(item).parent().on(\"dragover\", onDragOver);\r\n            $(item).parent().on(\"drop\", onDrop);\r\n          } // Exc de Relacionar\r\n          else {\r\n            $(item).on(\"click\", function (event) {\r\n              onArrasteClick(this, event);\r\n            });\r\n\r\n            $(item)\r\n              .parent()\r\n              .on(\"click\", function (event) {\r\n                onAlvoClick(this, event);\r\n              });\r\n          }\r\n        }\r\n\r\n        if ($(item).attr(\"alvo\")) {\r\n          BASE.indiceAlvo++;\r\n          item.old = item.innerHTML;\r\n          $(item).addClass(\"alvo\");\r\n          $(item).addClass(\"alvo\" + BASE.indiceAlvo);\r\n          $(item).attr(\"indiceAlvo\", BASE.indiceAlvo);\r\n\r\n          var _alvoArray = $(item).attr(\"alvo\").split(\"|\");\r\n          if (_alvoArray.length > 1) {\r\n            BASE.individual = false;\r\n          }\r\n\r\n          // //Exc de Relacionar\r\n          if (resolucaoMin) {\r\n            $(item).on(\"click\", function (event) {\r\n              onAlvoClick(this, event);\r\n            });\r\n          }\r\n        }\r\n\r\n        if (!resolucaoMin) {\r\n          // Exc de Arraste\r\n          $(item).on(\"dragover\", onDragOver);\r\n          $(item).on(\"drop\", onDrop);\r\n        }\r\n      });\r\n\r\n    if (BASE.individual) {\r\n      BASE.SETTINGS.limiteAlvo = 1;\r\n    }\r\n\r\n    BASE.action = {\r\n      status: \"init\",\r\n      response: true,\r\n    };\r\n    BASE.SETTINGS.call(BASE);\r\n\r\n    ///////////////////////////////////////////\r\n    //      Relacionar                       //\r\n    ///////////////////////////////////////////\r\n\r\n    function onArrasteClick(_this, event) {\r\n      BASE.$activeItem = _this;\r\n\r\n      if (!$(BASE.$activeItem).attr(\"encap\")) {\r\n        BASE.$activeItemEncap = BASE.$activeItem;\r\n      }\r\n\r\n      $(\".\" + BASE.SETTINGS.featuredItemClass).removeClass(\r\n        BASE.SETTINGS.featuredItemClass\r\n      );\r\n      $(BASE.$activeItem).addClass(BASE.SETTINGS.featuredItemClass);\r\n    }\r\n\r\n    function onAlvoClick(_this, event) {\r\n      if ($(_this).attr(\"alvo\") || $(_this).parent().attr(\"alvo\")) {\r\n        if ($(_this).parent().attr(\"alvo\")) {\r\n          BASE.$alvoItem = $(_this).parent();\r\n        } else {\r\n          BASE.$alvoItem = $(_this);\r\n        }\r\n\r\n        //arraste Inicial -> alvo\r\n        if (!$(BASE.$activeItem).attr(\"encap\")) {\r\n          var _obj = $(BASE.$activeItem).clone();\r\n          var _parent = $(BASE.$activeItem).parent();\r\n          $(_obj).addClass(\"cloneItens\");\r\n          $(BASE.$alvoItem).append(BASE.$activeItem);\r\n          _parent.append(_obj);\r\n\r\n          $(BASE.$activeItem).attr(\"encap\", \"init\");\r\n          BASE.$activeItem = null;\r\n          BASE.$alvoItem = null;\r\n          $(\".\" + BASE.SETTINGS.featuredItemClass).removeClass(\r\n            BASE.SETTINGS.featuredItemClass\r\n          );\r\n        } else {\r\n          //arraste Inicial -> alvo com 1 a mais elemento\r\n          if (\r\n            BASE.$activeItemEncap &&\r\n            !$(BASE.$activeItemEncap).attr(\"encap\")\r\n          ) {\r\n            if (!BASE.individual) {\r\n              if (\r\n                $(BASE.$alvoItem)[0].children.length >= BASE.SETTINGS.limiteAlvo\r\n              ) {\r\n                return false;\r\n              }\r\n\r\n              var _obj = $(BASE.$activeItemEncap).clone();\r\n              var _parent = $(BASE.$activeItemEncap).parent();\r\n              $(_obj).addClass(\"cloneItens\");\r\n              $(BASE.$alvoItem).append(BASE.$activeItemEncap);\r\n              _parent.append(_obj);\r\n\r\n              $(BASE.$activeItemEncap).attr(\"encap\", \"init\");\r\n              BASE.$activeItem = null;\r\n              BASE.$alvoItem = null;\r\n              BASE.$activeItemEncap = null;\r\n              $(\".\" + BASE.SETTINGS.featuredItemClass).removeClass(\r\n                BASE.SETTINGS.featuredItemClass\r\n              );\r\n\r\n              return false;\r\n            } else {\r\n              // var _obj = $(BASE.$activeItemEncap).clone();\r\n              // var _parent = $(BASE.$activeItemEncap).parent();\r\n              // $(_obj).addClass(\"cloneItens\");\r\n              // _parent.append(_obj);\r\n              // $(BASE.$alvoItem).append(BASE.$activeItemEncap);\r\n              // $(BASE.$activeItemEncap).attr('encap', 'init');\r\n              // var parentOld = $(BASE.$activeItem)[0].parentInit;\r\n              // $(parentOld).find('.cloneItens').remove();\r\n              // $(parentOld).append(BASE.$activeItem);\r\n              // $(BASE.$activeItem).removeAttr('encap');\r\n              // BASE.$activeItem = null;\r\n              // BASE.$alvoItem = null;\r\n              // BASE.$activeItemEncap = null;\r\n              // $('.' + BASE.SETTINGS.featuredItemClass).removeClass(BASE.SETTINGS.featuredItemClass);\r\n              // return false;\r\n            }\r\n          }\r\n\r\n          /// alvo para alvo\r\n          if (BASE.$activeItemOld) {\r\n            if ($(BASE.$activeItemOld).parent() != $(BASE.$alvoItem)) {\r\n              if (!BASE.individual) {\r\n                if (\r\n                  $(BASE.$alvoItem)[0].children.length >=\r\n                  BASE.SETTINGS.limiteAlvo\r\n                ) {\r\n                  return false;\r\n                }\r\n                $(BASE.$alvoItem).append(BASE.$activeItemOld);\r\n              } else {\r\n                var _parentOld = $(BASE.$activeItemOld).parent();\r\n                $(BASE.$alvoItem).append(BASE.$activeItemOld);\r\n                if ($(BASE.$alvoItem)[0].children.length > 1) {\r\n                  _parentOld.append(BASE.$activeItem);\r\n                }\r\n              }\r\n\r\n              BASE.$activeItem = null;\r\n              BASE.$alvoItem = null;\r\n              BASE.$activeItemOld = null;\r\n              $(\".\" + BASE.SETTINGS.featuredItemClass).removeClass(\r\n                BASE.SETTINGS.featuredItemClass\r\n              );\r\n            }\r\n          } else {\r\n            BASE.$activeItemOld = BASE.$activeItem;\r\n          }\r\n        }\r\n      } else {\r\n        /// dentro do alvo e vc quer voltar para o arraste incial\r\n        if ($(BASE.$activeItem).attr(\"encap\")) {\r\n          var parentOld = $(BASE.$activeItem)[0].parentInit;\r\n          $(parentOld).find(\".cloneItens\").remove();\r\n          $(parentOld).append(BASE.$activeItem);\r\n\r\n          $(BASE.$activeItem).removeAttr(\"encap\");\r\n          BASE.$activeItem = null;\r\n          BASE.$alvoItem = null;\r\n          BASE.$activeItemOld = null;\r\n          $(\".\" + BASE.SETTINGS.featuredItemClass).removeClass(\r\n            BASE.SETTINGS.featuredItemClass\r\n          );\r\n        }\r\n      }\r\n\r\n      statusConfirmar();\r\n    }\r\n\r\n    ///////////////////////////////////////////\r\n    //      DRAG DROP                        //\r\n    ///////////////////////////////////////////\r\n\r\n    function onDragStart(event) {\r\n      BASE.$activeItem = this;\r\n      event.originalEvent.dataTransfer.effectAllowed = \"move\";\r\n      event.originalEvent.dataTransfer.setData(\"text/html\", this.innerHTML);\r\n      BASE.action = {\r\n        status: \"drag\",\r\n        response: {\r\n          drag: this,\r\n          drop: null,\r\n        },\r\n      };\r\n\r\n      $(\".\" + BASE.SETTINGS.featuredItemClass).removeClass(\r\n        BASE.SETTINGS.featuredItemClass\r\n      );\r\n      $(BASE.$activeItem).addClass(BASE.SETTINGS.featuredItemClass);\r\n\r\n      BASE.SETTINGS.call(BASE);\r\n    }\r\n\r\n    function onDragOver(event) {\r\n      if (event.preventDefault) {\r\n        event.preventDefault();\r\n      }\r\n\r\n      event.originalEvent.dataTransfer.dropEffect = \"move\";\r\n      BASE.action = {\r\n        status: \"over\",\r\n        response: {\r\n          drag: this,\r\n          drop: null,\r\n        },\r\n      };\r\n      BASE.SETTINGS.call(BASE);\r\n      return false;\r\n    }\r\n\r\n    function onDrop(event) {\r\n      if (event.stopPropagation) {\r\n        event.stopPropagation();\r\n      }\r\n\r\n      var dragThis = BASE.$activeItem;\r\n      var dropThis = this;\r\n\r\n      if ($(dropThis).attr(\"alvo\") || $(dropThis).parent().attr(\"alvo\")) {\r\n        if (!BASE.individual) {\r\n          if ($(dropThis).parent().attr(\"alvo\")) {\r\n            if (\r\n              $(dropThis).parent().children().length >= BASE.SETTINGS.limiteAlvo\r\n            ) {\r\n              return false;\r\n            }\r\n          } else {\r\n            if ($(dropThis).children().length >= BASE.SETTINGS.limiteAlvo) {\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n\r\n        $(dragThis)\r\n          .parent()\r\n          .removeAttr(\"a\" + $(dragThis).attr(\"indiceArraste\"));\r\n        if (!dragThis.oldParent) dragThis.oldParent = $(dragThis).parent();\r\n\r\n        var dropObj = null;\r\n        if ($(dropThis).parent().attr(\"alvo\")) {\r\n          dropObj = $(dropThis).parent();\r\n        } else {\r\n          dropObj = $(dropThis);\r\n        }\r\n\r\n        dropObj.append(dragThis);\r\n        dropObj.attr(\"a\" + $(dragThis).attr(\"indiceArraste\"), \"1\");\r\n\r\n        //Verificação apenas quando todos os alvos têm apenas um item\r\n        if (BASE.individual && dropObj.children().length > 1) {\r\n          dropObj.removeAttr(\"a\" + dropObj.children().eq(0).attr(\"arraste\"));\r\n          var oldParent = dropObj.children().eq(0)[0].oldParent;\r\n          $(oldParent).find(\".cloneItens\").remove();\r\n          $(oldParent).append(dropObj.children().eq(0));\r\n          $(dropObj.children().eq(0)).attr(\"alvoAtivo\", 0);\r\n        }\r\n\r\n        var _obj = $(dragThis).clone();\r\n        $(_obj).addClass(\"cloneItens\");\r\n        dragThis.oldParent.find(\".\" + BASE.SETTINGS.itemClass).remove();\r\n        dragThis.oldParent.append(_obj);\r\n        $(dragThis).attr(\"alvoAtivo\", 1);\r\n      } else {\r\n        if ($(dropThis).attr(\"alvoAtivo\") == 1) {\r\n          return false;\r\n        }\r\n\r\n        $(dragThis)\r\n          .parent()\r\n          .removeAttr(\"a\" + $(dragThis).attr(\"indiceArraste\"));\r\n        $(dragThis.oldParent).append(dragThis);\r\n        $(dragThis.oldParent).find(\".cloneItens\").remove();\r\n        $(dragThis).attr(\"alvoAtivo\", 0);\r\n      }\r\n\r\n      BASE.action = {\r\n        status: \"drop\",\r\n        response: {\r\n          drag: dragThis,\r\n          drop: dropThis,\r\n        },\r\n      };\r\n      BASE.SETTINGS.call(BASE);\r\n      statusConfirmar();\r\n      return false;\r\n    }\r\n\r\n    function statusConfirmar() {\r\n      var _alvoMudado = 0;\r\n      $(BASE.$container)\r\n        .find(\".alvo\")\r\n        .each(function (indice, item) {\r\n          _alvoMudado += $(item).find(\".arraste\").length;\r\n        });\r\n\r\n      if (_alvoMudado > 0) {\r\n        $(BASE.$container)\r\n          .find(\".\" + BASE.SETTINGS.confirmarClass)\r\n          .removeClass(\"hide\");\r\n      } else {\r\n        $(BASE.$container)\r\n          .find(\".\" + BASE.SETTINGS.confirmarClass)\r\n          .addClass(\"hide\");\r\n      }\r\n    }\r\n\r\n    $(BASE.$container)\r\n      .find(\".\" + BASE.SETTINGS.confirmarClass)\r\n      .on(\"click\", function (event) {\r\n        BASE.$activeItem = null;\r\n        BASE.$alvoItem = null;\r\n        BASE.$activeItemEncap = null;\r\n        $(\".\" + BASE.SETTINGS.featuredItemClass).removeClass(\r\n          BASE.SETTINGS.featuredItemClass\r\n        );\r\n\r\n        $(BASE.$container)\r\n          .find(\".alvo\")\r\n          .each(function (indice, item) {\r\n            $(item)\r\n              .find(\".arraste\")\r\n              .each(function () {\r\n                var _arraste = $(this).attr(\"arraste\");\r\n                $(item).attr(\"a\" + _arraste, 1);\r\n              });\r\n          });\r\n\r\n        var _statusConfere = true;\r\n\r\n        if (BASE.SETTINGS.model == \"AND\") {\r\n          $(BASE.$container)\r\n            .find(\".alvo\")\r\n            .each(function (indice, item) {\r\n              if ($(item).attr(\"alvo\") != 0) {\r\n                var _alvoArray = $(item).attr(\"alvo\").split(\"|\");\r\n\r\n                for (var i = 0; i < _alvoArray.length; i++) {\r\n                  if (!$(item).attr(\"a\" + _alvoArray[i]))\r\n                    _statusConfere = false;\r\n                }\r\n              }\r\n            });\r\n        } else {\r\n          ///OR\r\n          var alv = 0;\r\n          var alvos = $(BASE.$container).find(\".alvo\");\r\n          var alvosAll = alvos.length;\r\n          alvos.each(function (indice, item) {\r\n            if ($(item).attr(\"alvo\") != 0) {\r\n              var _alvoArray = $(item).attr(\"alvo\").split(\"|\");\r\n\r\n              for (var i = 0; i < _alvoArray.length; i++) {\r\n                if ($(item).attr(\"a\" + _alvoArray[i])) alv += 1;\r\n              }\r\n            }\r\n          });\r\n\r\n          if (alvosAll == alv) {\r\n            _statusConfere = true;\r\n          } else {\r\n            _statusConfere = false;\r\n          }\r\n\r\n          console.log(\"alvosAll\", alvosAll);\r\n          console.log(\"alv\", alv);\r\n        }\r\n\r\n        BASE.action = {\r\n          status: \"confirmar\",\r\n          response: _statusConfere,\r\n        };\r\n        BASE.SETTINGS.call(BASE);\r\n      });\r\n  };\r\n})(jQuery);\r\n"]}