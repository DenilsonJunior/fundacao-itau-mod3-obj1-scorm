{"version":3,"sources":["exercise-drag-drop.js"],"names":["events","on","pesoQuestao","pesoAlternativa","pesoAlternativaStatus","it_dragdrop","totalCorretas","dragdropOpen","pesoQuestaoStatus","dragdrop","obj","scorm","loadObject","length","erradas","totalErros","indice","item","corretas","porcentagem","parseInt","totalPesoQuestao","q","totalPesoAlternativas","a","status","r","t","pq","pa","removeObject","push","total","totalQestao","emit","$","each","this","currentID","_template","window","uid","uidPAGE","repeat","repeatCache","attr","repeatInit","maxItensInAlvo","featuredClass","relacionarExerc","randomExerc","repeatBtn","cacheBtn","pesoQuestion","infoTxt","model","standardBtn","resolucaoMin","parent","reset","find","remove","append","_arraste","feedObj","buzzfeedStatus","hasClass","blockArraste","addClass","relacionar","html","call","action","getCache","parentInit","e","removeAttr","removeClass","css","drag_drop_exerc","confirmarClass","feedContain","sort","Math","random","itemClass","featuredItemClass","limiteAlvo","feedCurrent","_obj","saveObject","drag_drop","questionTrigger","ind","it","alv","indX","itemX","_clone","clone","tentativas","console","log","response","trigger","alvo","drag_drop_cache","arrasteAll","i","splice","error","alternativas","current"],"mappings":"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","file":"exercise-drag-drop.js","sourcesContent":["events.on(\"ready\", function () {\r\n  $(\".exercise-drag-drop\").each(function (indice, item) {\r\n    var _template = this;\r\n    var currentID = indice;\r\n    var uidPAGE = window.uid;\r\n    var repeat = 0;\r\n    var repeatCache = 0;\r\n    var repeatInit = 0;\r\n    var maxItensInAlvo = $(_template).attr(\"maxItensInAlvo\")\r\n      ? $(_template).attr(\"maxItensInAlvo\")\r\n      : 1;\r\n    var featuredClass = $(_template).attr(\"featuredClass\")\r\n      ? $(_template).attr(\"featuredClass\")\r\n      : \"featured-item\";\r\n\r\n    var relacionarExerc =\r\n      $(_template).attr(\"relacionar\") == \"relacionar\" ||\r\n      $(_template).attr(\"relacionar\") == true\r\n        ? true\r\n        : false;\r\n    var randomExerc =\r\n      $(_template).attr(\"random\") == \"random\" ||\r\n      $(_template).attr(\"random\") == true\r\n        ? true\r\n        : false;\r\n\r\n    var standardBtn = $(_template).attr(\"standardBtn\")\r\n      ? $(_template).attr(\"standardBtn\")\r\n      : \"confirmar\";\r\n    var repeatBtn = $(_template).attr(\"repeatBtn\")\r\n      ? $(_template).attr(\"repeatBtn\")\r\n      : \"refazer\";\r\n    var cacheBtn = $(_template).attr(\"cacheBtn\")\r\n      ? $(_template).attr(\"cacheBtn\")\r\n      : \"rever\";\r\n    var pesoQuestion = $(_template).attr(\"peso\")\r\n      ? $(_template).attr(\"peso\")\r\n      : -1;\r\n\r\n    var arrasteAll = $(_template).find(\".item-select\").length;\r\n\r\n    var infoClass = $(_template).attr(\"infoClass\")\r\n      ? $(_template).attr(\"infoClass\")\r\n      : false;\r\n    var infoTxt = $(_template).attr(\"infoTxt\")\r\n      ? $(_template).attr(\"infoTxt\")\r\n      : \"Arraste os elementos\";\r\n\r\n    var model = $(_template).attr(\"model\") ? $(_template).attr(\"model\") : \"OR\"; //OR ou AND\r\n\r\n    var feedObj = null;\r\n    var buzzfeedStatus = $(_template).hasClass(\"children-buzzfeed\");\r\n\r\n    $(_template).find(\".button-confirm\").addClass(\"hide\");\r\n\r\n    //verifica a resolução min com base na variavel do CSS Tablet( tema > structure.less )\r\n    var resolucaoMin = false;\r\n\r\n    if (resolucaoMin)\r\n      $(_template)\r\n        .parent()\r\n        .find(\".\" + infoClass)\r\n        .html(infoTxt);\r\n\r\n    if ($(_template).attr(\"repeat\")) {\r\n      repeat = parseInt($(this).attr(\"repeat\"));\r\n      repeatInit = parseInt($(this).attr(\"repeat\"));\r\n      repeatCache = parseInt($(this).attr(\"repeat\"));\r\n    }\r\n\r\n    reset();\r\n\r\n    function reset() {\r\n      $(_template).find(\".feedback\").addClass(\"hide\");\r\n      $(_template).find(\".button-confirm\").html(standardBtn);\r\n\r\n      $(_template)\r\n        .find(\".arraste\")\r\n        .each(function (indice, item) {\r\n          var parent = $(item)[0].parentInit;\r\n          $(parent).find(\".cloneItens\").remove();\r\n          $(parent).append(item);\r\n          $(item).removeAttr(\"encap\");\r\n        });\r\n\r\n      $(_template)\r\n        .find(\".alvo\")\r\n        .each(function (indice, item) {\r\n          $(item).find(\".arraste\").remove();\r\n\r\n          $(_template)\r\n            .find(\".arraste\")\r\n            .each(function () {\r\n              var _arraste = $(this).attr(\"arraste\");\r\n              $(item).removeAttr(\"a\" + _arraste);\r\n            });\r\n        });\r\n    }\r\n\r\n    function blockArraste() {\r\n      $(_template).find(\".arraste\").removeClass(\"featuredItens\");\r\n      $(_template).find(\".arraste\").css(\"pointer-events\", \"none\");\r\n      $(_template).find(\".alvo\").css(\"pointer-events\", \"none\");\r\n    }\r\n\r\n    if (randomExerc) {\r\n      $(_template)\r\n        .find(\".col-itens\")\r\n        .html(\r\n          $(_template)\r\n            .find(\".col-itens .container-item\")\r\n            .sort(function () {\r\n              return Math.random() - 0.5;\r\n            })\r\n        );\r\n    }\r\n\r\n    $(_template)\r\n      .find(\".button-limpar\")\r\n      .on(\"click\", function () {\r\n        reset();\r\n        events.emit(\"dragdrop-reset\");\r\n      });\r\n\r\n    $(_template).drag_drop_exerc({\r\n      itemClass: \"dragDrop_element\",\r\n      featuredItemClass: featuredClass,\r\n      confirmarClass: \"confirmar\",\r\n      limiteAlvo: parseInt(maxItensInAlvo), /// quantidade de elementos que cabe em cada alvo\r\n      relacionar: relacionarExerc,\r\n      model: model, /// AND ou OR\r\n      call: function (e) {\r\n        if (e.action.status == \"init\") {\r\n          getCache();\r\n        }\r\n        if (e.action.status == \"confirmar\") {\r\n          //e.action.response\r\n\r\n          console.log(e.action.response);\r\n\r\n          if (e.action.response == true) {\r\n            $(_template).attr(\"res-feed\", 1);\r\n            feedObj = \"feedback-positive\";\r\n            repeat = 0;\r\n          } else {\r\n            $(_template).attr(\"res-feed\", 0);\r\n            feedObj = \"feedback-negative\";\r\n\r\n            // Quando a questao tiver refazer é preciso cadastrar\r\n            // cada feed negativo. ex: '.feedback-negative1', '.feedback-negative2' ate 10 Ex.:9999 passa a ser um feed só\r\n            if (repeatInit > 0 && repeatInit <= 10) {\r\n              var feedCurrent = repeatInit - repeat + 1;\r\n              if (\r\n                $(_template).find(\".feedback-negative\" + feedCurrent).length > 0\r\n              ) {\r\n                feedObj = \"feedback-negative\" + feedCurrent;\r\n              }\r\n            }\r\n          }\r\n\r\n          if (buzzfeedStatus) {\r\n            $(_template).find(\".container-alternative\").removeClass(\"actived\");\r\n            $(_template).trigger(\"buzzfeed\", [$(_template).attr(\"res-feed\")]);\r\n            $(_template).find(\".button-confirm\").addClass(\"hide\");\r\n            reset();\r\n          } else {\r\n            var feedContain = $(_template).find(\".\" + feedObj);\r\n            $(\"body\").trigger(\"openModal\", [feedContain]);\r\n          }\r\n        }\r\n      },\r\n    });\r\n\r\n    $(_template)\r\n      .find(\".modal-close\")\r\n      .on(\"click focusin\", function () {\r\n        $(_template).find(\".feedback\").addClass(\"hide\");\r\n\r\n        if (repeat <= 0) {\r\n          if ($(this).attr(\"arrow_status_class\")) {\r\n            $(\"body\").trigger(\"nextLiberate\");\r\n          }\r\n\r\n          $(_template).find(\".container-alternative\").addClass(\"respondido\");\r\n          $(_template).find(\".button-confirm\").html(cacheBtn);\r\n\r\n          blockArraste();\r\n          saveCache();\r\n        } else {\r\n          reset();\r\n\r\n          $(_template).find(\".container-alternative\").removeClass(\"respondido\");\r\n          $(_template).find(\".button-confirm\").html(repeatBtn);\r\n\r\n          $(_template).find(\".button-confirm\").addClass(\"hide\");\r\n          $(_template).find(\".container-alternative\").removeClass(\"actived\");\r\n\r\n          repeat--;\r\n          repeatCache--;\r\n        }\r\n\r\n        var feedContain = $(_template).find(\".\" + feedObj);\r\n        $(\"body\").trigger(\"closeModal\", [feedContain]);\r\n      });\r\n\r\n    function getCache() {\r\n      if ($(_template).attr(\"cache\")) {\r\n        if (scorm.loadObject(\"dragdrop\")) {\r\n          //var dragdrop = JSON.parse(scorm.loadObject('dragdrop'));\r\n          var dragdrop = scorm.loadObject(\"dragdrop\");\r\n\r\n          if (dragdrop.length > 0) {\r\n            $.each(dragdrop, function (indice, item) {\r\n              if (item.uid == uidPAGE && item.q == currentID) {\r\n                $(_template).find(\".button-confirm\").removeClass(\"hide\");\r\n                $(_template).find(\".button-confirm\").html(cacheBtn);\r\n\r\n                repeat = 0;\r\n                repeatInit = 0;\r\n                repeatCache = 0;\r\n\r\n                $(_template)\r\n                  .find(\".alvo\")\r\n                  .each(function (ind, it) {\r\n                    var alv = item.a[ind];\r\n                    if (alv.length > 0) {\r\n                      $.each(alv, function (indX, itemX) {\r\n                        $(it).attr(\"a\" + itemX, 1);\r\n                        $(it).attr(\"alvoAtivo\", 1);\r\n\r\n                        var _arraste = $(\".arraste\" + itemX);\r\n                        var _clone = _arraste.clone();\r\n                        _arraste.addClass(\"cloneItens\");\r\n\r\n                        $(it).append(_clone);\r\n                      });\r\n                    }\r\n                  });\r\n\r\n                blockArraste();\r\n              }\r\n            });\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    function saveCache() {\r\n      //// informação para caso precise salvar no suspendata\r\n      if ($(_template).attr(\"cache\")) {\r\n        var drag_drop = [];\r\n        var drag_drop_cache = [];\r\n        if (scorm.loadObject(\"dragdrop\")) {\r\n          drag_drop = scorm.loadObject(\"dragdrop\");\r\n        }\r\n\r\n        $(_template)\r\n          .find(\".alvo\")\r\n          .each(function (indice, item) {\r\n            var alvo = [];\r\n            for (var i = 1; i <= arrasteAll; i++) {\r\n              if ($(this).attr(\"a\" + i)) {\r\n                alvo.push(i);\r\n              }\r\n            }\r\n            drag_drop_cache.push(alvo);\r\n          });\r\n\r\n        $.each(drag_drop, function (indice, it) {\r\n          try {\r\n            if (it && it[\"uid\"] == uidPAGE && it[\"q\"] == currentID) {\r\n              drag_drop.splice(indice, 1);\r\n            }\r\n          } catch (e) {\r\n            // declarações para manipular quaisquer exceções\r\n            console.error(\"erro no array do dragdrop\", e); // passa o objeto de exceção para o manipulador de erro\r\n          }\r\n        });\r\n\r\n        var _obj = {\r\n          uid: uidPAGE,\r\n          q: currentID,\r\n          a: drag_drop_cache,\r\n          r: parseInt($(_template).attr(\"res-feed\")),\r\n          t: repeatInit - repeatCache,\r\n        };\r\n\r\n        //Peso da Questao\r\n        if (pesoQuestion > -1) {\r\n          if (_obj.r == 1) {\r\n            _obj.pq = parseInt(pesoQuestion);\r\n          } else {\r\n            _obj.pq = 0;\r\n          }\r\n        }\r\n\r\n        drag_drop.push(_obj);\r\n        //scorm.saveObject('dragdrop', JSON.stringify(drag_drop));\r\n        scorm.saveObject(\"dragdrop\", drag_drop);\r\n        questionTrigger();\r\n      }\r\n    }\r\n  });\r\n\r\n  questionTrigger();\r\n\r\n  function questionTrigger() {\r\n    if (scorm.loadObject(\"dragdrop\")) {\r\n      //var dragdrop = JSON.parse(scorm.loadObject('dragdrop'));\r\n      var dragdrop = scorm.loadObject(\"dragdrop\");\r\n\r\n      var dragdropOpen = [];\r\n      var totalQestao = dragdrop.length;\r\n      var totalErros = 0;\r\n      var totalCorretas = 0;\r\n      var pesoQuestao = 0;\r\n      var pesoQuestaoStatus = false;\r\n      var pesoAlternativa = 0;\r\n      var pesoAlternativaStatus = false;\r\n\r\n      $.each(dragdrop, function (indice, item) {\r\n        var it_dragdrop = {\r\n          uidPAGE: item.uid,\r\n          currentID: item.q,\r\n          alternativas: item.a,\r\n          status: item.r,\r\n          tentativas: item.t,\r\n        };\r\n\r\n        if (item.r == 0) totalErros += 1;\r\n        if (item.r == 1) totalCorretas += 1;\r\n        if (item.pq) {\r\n          pesoQuestao += parseInt(item.pq);\r\n          pesoQuestaoStatus = true;\r\n          it_dragdrop.pesoQuestao = item.pq;\r\n        }\r\n        if (item.pa) {\r\n          pesoAlternativa += parseInt(item.pa);\r\n          pesoAlternativaStatus = true;\r\n          it_dragdrop.pesoAlternativa = item.pa;\r\n        }\r\n\r\n        dragdropOpen.push(it_dragdrop);\r\n      });\r\n\r\n      var obj = {\r\n        dragdrop: dragdropOpen,\r\n        total: totalQestao,\r\n        erradas: totalErros,\r\n        corretas: totalCorretas,\r\n        porcentagem: parseInt((totalCorretas / totalQestao) * 100),\r\n        totalPesoQuestao: 0,\r\n        totalPesoAlternativas: 0,\r\n      };\r\n\r\n      if (pesoQuestaoStatus) {\r\n        obj.totalPesoQuestao = pesoQuestao;\r\n      }\r\n\r\n      if (pesoAlternativaStatus) {\r\n        obj.totalPesoAlternativas = pesoAlternativa;\r\n      }\r\n\r\n      //console.log(obj);\r\n      events.emit(\"dragdrop\", obj);\r\n    }\r\n  }\r\n});\r\n\r\nevents.on(\"dragdrop\", function (e) {\r\n  // console.log('dragdrop');\r\n  // console.log(e);\r\n});\r\n\r\n// var e = {current:''};\r\n//events.emit('read-dragdrop', e);\r\n//console.log(e);\r\nevents.on(\"read-dragdrop\", function (e) {\r\n  var obj = {};\r\n\r\n  if (scorm.loadObject(\"dragdrop\")) {\r\n    //var dragdrop = JSON.parse(scorm.loadObject('dragdrop'));\r\n    var dragdrop = scorm.loadObject(\"dragdrop\");\r\n\r\n    var dragdropOpen = [];\r\n    var totalQestao = dragdrop.length;\r\n    var totalErros = 0;\r\n    var totalCorretas = 0;\r\n    var pesoQuestao = 0;\r\n    var pesoQuestaoStatus = false;\r\n    var pesoAlternativa = 0;\r\n    var pesoAlternativaStatus = false;\r\n\r\n    $.each(dragdrop, function (indice, item) {\r\n      var it_dragdrop = {\r\n        uidPAGE: item.uid,\r\n        currentID: item.q,\r\n        alternativas: item.a,\r\n        status: item.r,\r\n        tentativas: item.t,\r\n      };\r\n\r\n      if (item.r == 0) totalErros += 1;\r\n      if (item.r == 1) totalCorretas += 1;\r\n      if (item.pq) {\r\n        pesoQuestao += parseInt(item.pq);\r\n        pesoQuestaoStatus = true;\r\n        it_dragdrop.pesoQuestao = item.pq;\r\n      }\r\n      if (item.pa) {\r\n        pesoAlternativa += parseInt(item.pa);\r\n        pesoAlternativaStatus = true;\r\n        it_dragdrop.pesoAlternativa = item.pa;\r\n      }\r\n\r\n      dragdropOpen.push(it_dragdrop);\r\n    });\r\n\r\n    obj = {\r\n      dragdrop: dragdropOpen,\r\n      total: totalQestao,\r\n      erradas: totalErros,\r\n      corretas: totalCorretas,\r\n      porcentagem: parseInt((totalCorretas / totalQestao) * 100),\r\n      totalPesoQuestao: 0,\r\n      totalPesoAlternativas: 0,\r\n    };\r\n\r\n    if (pesoQuestaoStatus) {\r\n      obj.totalPesoQuestao = pesoQuestao;\r\n    }\r\n\r\n    if (pesoAlternativaStatus) {\r\n      obj.totalPesoAlternativas = pesoAlternativa;\r\n    }\r\n\r\n    //console.log(obj);\r\n    events.emit(\"dragdrop\", obj);\r\n  }\r\n\r\n  e.current = obj;\r\n});\r\n\r\n// events.emit('dragdrop-reset');\r\nevents.on(\"dragdrop-reset\", function () {\r\n  console.log(\"dragdrop-reset\");\r\n  scorm.removeObject(\"dragdrop\");\r\n});\r\n"]}